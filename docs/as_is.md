# Текущее состояние

Актуальная версия программного продукта (ПП) «Хитрый дом» имеет следующие основные характеристики:

* Позволяет только управлять отоплением в доме и проверять температуру.

* Каждая установка любого устройства сопровождается выездом специалиста по подключению системы отопления. Самостоятельно подключить свой датчик к системе пользователь не может.

В настоящее время к системе подключено 100 модулей управления отоплением.

## Диаграмма контекста (C4)

```puml
@startuml
'top to bottom direction
!include <C4/C4_Context>
!include <tupadr3/common>
!include <tupadr3/devicons2/postgresql>
!include <tupadr3/devicons2/spring_original>
!include <tupadr3/font-awesome-6/faucet>
!include <tupadr3/font-awesome-6/temperature_half>
!include <tupadr3/govicons/user_graduate>

title [System Context] ПП «Хитрый Дом»

Person_Ext(user, "Пользователь", \
    "Пользователь, чья система отопления подключена к системе", \
    $type=Person)

Person(installer, "Монтёр", \
    "Специалист компании, подключающий новые устройства", \
    $sprite=user_graduate, $type=Person)

System(SmartHome, "ПП Хитрый Дом", \
    "Управляет отопительными системами в коттеджах", \
    $sprite=spring_original, $type="Software System")

System_Ext(sensorN, "Датчик N", "Датчик температуры N", \
    $sprite=temperature_half, $type="Software System")
System_Ext(moduleN, "Модуль управления N", \
    "Устройство, регулирующее температуру в помещении N", \
    $sprite=faucet, $type="Software System")

Rel(user, SmartHome, \
    "Включает/отключает, устанавливает температуру", $techn="HTTP")
Rel(user, SmartHome, \
    "Проверяет температуру", $techn="HTTP")

Rel(installer, SmartHome, \
    "Подключает новые устройства", $techn="HTTP")
Rel(SmartHome, sensorN, "Запрашивает температуру", \
    $techn="ReST / JSON")
Rel(SmartHome, moduleN, \
    "Запрашивает/устанавливает значение", $techn="ReST / JSON")

@enduml
```

## Функционал системы

В самом приложении можно выделить 2 домена: [Управление отопительными системами](#_4) и [Мониторинг температуры](#_5).

### Управление отопительными системами

* Пользователи могут удалённо включать/выключать отопление в своих домах.
* Пользователи могут устанавливать желаемую температуру.
* Система автоматически поддерживает заданную температуру, регулируя подачу тепла.

### Мониторинг температуры

* Система получает данные о температуре с датчиков, установленных в домах.
* Пользователи могут просматривать текущую температуру в своих домах через веб-интерфейс.

## Архитектура системы

В архитектурном плане система представляет монолитное контейнеризированное (Docker) приложение на Java с применением фреймворка SpringBoot.

* **Язык программирования**: Java

* **База данных**: PostgreSQL

* **Архитектура**: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.

* **Взаимодействие**: Синхронное, запросы обрабатываются последовательно.

* **Масштабируемость**: Ограничена, так как монолит сложно масштабировать по частям.

* **Развертывание**: Требует остановки всего приложения.

Всё управление идёт от сервера к датчику. Данные о температуре также получаются через запрос от сервера к датчику.
