# Текущее состояние

Актуальная версия программного продукта (ПП) РосУдалТеплоКонтроль имеет следующие основные характеристики:

* Позволяет только управлять отоплением в доме и проверять температуру.

* Каждая установка любого устройства сопровождается выездом специалиста по подключению системы отопления. Самостоятельно подключить свой датчик к системе пользователь не может.

В настоящее время к системе подключено 100 модулей управления отоплением.

```puml
@startuml
!theme sketchy-outline

title Диаграмма контекста системы РосУдалТеплоКонтроль

top to bottom direction

!include https://raw.githubusercontent.com/RicardoNiepel/C4-PlantUML/master/C4_Context.puml

!$ICONURL = "https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v3.0.0/icons"
!include $ICONURL/common.puml
!include $ICONURL/font-awesome-6/users.puml
!include $ICONURL/font-awesome-6/temperature_half.puml
!include $ICONURL/font-awesome-6/faucet.puml
!include $ICONURL/govicons/user_graduate.puml
!include $ICONURL/devicons2/spring_original.puml

Person_Ext(user, "Пользователь", \
    "Пользователь, чья система отопления подключена к системе", \
    $sprite=users)

Person(installer, "Монтёр", \
    "Специалист компании, подключающий новые устройства", \
    $sprite=user_graduate)

System(RosRemHeatControl, "ПП РосУдалТеплоКонтроль", \
    "Управляет отопительными системами в коттеджах", \
    spring_original)

System_Ext(sensorN, "Датчик N", "Датчик температуры N", \
    $sprite=temperature_half, $type="ReST API")
System_Ext(moduleN, "Модуль управления N", \
    "Устройство, регулирующее температуру в помещении N", \
    $sprite=faucet, $type="ReST API")

Rel(user, RosRemHeatControl, \
    "Включает/отключает, устанавливает температуру", $techn="HTTP")
Rel(user, RosRemHeatControl, \
    "Проверяет температуру", $techn="HTTP")

Rel(installer, RosRemHeatControl, \
    "Подключает новые устройства", $techn="HTTP")
Rel(RosRemHeatControl, sensorN, "Запрашивает температуру", \
    $techn="ReST / JSON")
Rel(RosRemHeatControl, moduleN, \
    "Запрашивает/устанавливает значение", $techn="ReST / JSON")

@enduml
```

## Функционал системы

В самом приложении можно выделить 2 домена: [Управление устройствами](#_3) и
[Мониторинг температуры](#_4)

### Управление отопительными системами

* Пользователи могут удалённо включать/выключать отопление в своих домах.
* Пользователи могут устанавливать желаемую температуру.
* Система автоматически поддерживает заданную температуру, регулируя подачу тепла.

### Мониторинг температуры

* Система получает данные о температуре с датчиков, установленных в домах.
* Пользователи могут просматривать текущую температуру в своих домах через веб-интерфейс.

## Архитектура системы

В архитектурном плане система представляет монолитное контейнеризированное (Docker) приложение на Java с применением фреймворка SpringBoot.

* **Язык программирования**: Java

* **База данных**: PostgreSQL

* **Архитектура**: Монолитная, все компоненты системы (обработка запросов, бизнес-логика, работа с данными) находятся в рамках одного приложения.

* **Взаимодействие**: Синхронное, запросы обрабатываются последовательно.

* **Масштабируемость**: Ограничена, так как монолит сложно масштабировать по частям.

* **Развертывание**: Требует остановки всего приложения.

Всё управление идёт от сервера к датчику. Данные о температуре также получаются через запрос от сервера к датчику.
